/*! For license information please see 284.cdbb5d3a.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([["284"],{85746:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return s}});var i=r("24608");r.es(i,t),r("3814");var s=i.default},24608:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return i.default}});var i=r("81894");r.es(i,t)},49874:function(e,t,r){"use strict";r.r(t),r.d(t,{Lazyload:function(){return a}});var i=r("46560"),s=r("1272"),n=r("98124"),o=r("79313");let a={install(e,t={}){let r=new((0,i.default)())(t),a=new n.default({lazy:r});e.config.globalProperties.$Lazyload=r,t.lazyComponent&&e.component("LazyComponent",(0,s.default)(r)),t.lazyImage&&e.component("LazyImage",(0,o.default)(r)),e.directive("lazy",{beforeMount:r.add.bind(r),updated:r.update.bind(r),unmounted:r.remove.bind(r)}),e.directive("lazy-container",{beforeMount:a.bind.bind(a),updated:a.update.bind(a),unmounted:a.unbind.bind(a)})}}},1272:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return n}});var i=r("38613"),s=r("25111"),n=e=>({props:{tag:{type:String,default:"div"}},emits:["show"],render(){return(0,i.h)(this.tag,this.show&&this.$slots.default?this.$slots.default():null)},data:()=>({el:null,state:{loaded:!1},show:!1}),mounted(){this.el=this.$el,e.addLazyBox(this),e.lazyLoadHandler()},beforeUnmount(){e.removeComponent(this)},methods:{checkInView(){let t=(0,s.useRect)(this.$el);return s.inBrowser&&t.top<window.innerHeight*e.options.preLoad&&t.bottom>0&&t.left<window.innerWidth*e.options.preLoad&&t.right>0},load(){this.show=!0,this.state.loaded=!0,this.$emit("show",this)},destroy(){return this.$destroy}}})},98124:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return o}});var i=r("76586");let s={selector:"img"};class n{constructor({el:e,binding:t,vnode:r,lazy:i}){this.el=null,this.vnode=r,this.binding=t,this.options={},this.lazy=i,this.queue=[],this.update({el:e,binding:t})}update({el:e,binding:t}){this.el=e,this.options=Object.assign({},s,t.value),this.getImgs().forEach(e=>{this.lazy.add(e,Object.assign({},this.binding,{value:{src:"dataset"in e?e.dataset.src:e.getAttribute("data-src"),error:("dataset"in e?e.dataset.error:e.getAttribute("data-error"))||this.options.error,loading:("dataset"in e?e.dataset.loading:e.getAttribute("data-loading"))||this.options.loading}}),this.vnode)})}getImgs(){return Array.from(this.el.querySelectorAll(this.options.selector))}clear(){this.getImgs().forEach(e=>this.lazy.remove(e)),this.vnode=null,this.binding=null,this.lazy=null}}class o{constructor({lazy:e}){this.lazy=e,this.queue=[]}bind(e,t,r){let i=new n({el:e,binding:t,vnode:r,lazy:this.lazy});this.queue.push(i)}update(e,t,r){let i=this.queue.find(t=>t.el===e);i&&i.update({el:e,binding:t,vnode:r})}unbind(e){let t=this.queue.find(t=>t.el===e);t&&(t.clear(),(0,i.remove)(this.queue,t))}}},79313:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return a}});var i=r("25111"),s=r("76586"),n=r("96040"),o=r("38613"),a=e=>({props:{src:[String,Object],tag:{type:String,default:"img"}},render(){return(0,o.h)(this.tag,{src:this.renderSrc},this.$slots.default?.())},data:()=>({el:null,options:{src:"",error:"",loading:"",attempt:e.options.attempt},state:{loaded:!1,error:!1,attempt:0},renderSrc:""}),watch:{src(){this.init(),e.addLazyBox(this),e.lazyLoadHandler()}},created(){this.init()},mounted(){this.el=this.$el,e.addLazyBox(this),e.lazyLoadHandler()},beforeUnmount(){e.removeComponent(this)},methods:{init(){let{src:t,loading:r,error:i}=e.valueFormatter(this.src);this.state.loaded=!1,this.options.src=t,this.options.error=i,this.options.loading=r,this.renderSrc=this.options.loading},checkInView(){let t=(0,i.useRect)(this.$el);return t.top<window.innerHeight*e.options.preLoad&&t.bottom>0&&t.left<window.innerWidth*e.options.preLoad&&t.right>0},load(e=n.noop){if(this.state.attempt>this.options.attempt-1&&this.state.error){e();return}let{src:t}=this.options;(0,s.loadImageAsync)({src:t},({src:e})=>{this.renderSrc=e,this.state.loaded=!0},()=>{this.state.attempt++,this.renderSrc=this.options.error,this.state.error=!0})}}})},46560:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c}});var i=r("38613"),s=r("25111"),n=r("76586"),o=r("96040"),a=r("23351");let l="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",d=["scroll","wheel","mousewheel","resize","animationend","transitionend","touchmove"],h={rootMargin:"0px",threshold:0};function c(){return class{constructor({preLoad:e,error:t,throttleWait:r,preLoadTop:i,dispatchEvent:s,loading:o,attempt:a,silent:c=!0,scale:u,listenEvents:p,filter:f,adapter:g,observer:m,observerOptions:v}){this.mode=n.modeType.event,this.listeners=[],this.targetIndex=0,this.targets=[],this.options={silent:c,dispatchEvent:!!s,throttleWait:r||200,preLoad:e||1.3,preLoadTop:i||0,error:t||l,loading:o||l,attempt:a||3,scale:u||(0,n.getDPR)(u),ListenEvents:p||d,supportWebp:(0,n.supportWebp)(),filter:f||{},adapter:g||{},observer:!!m,observerOptions:v||h},this.initEvent(),this.imageCache=new n.ImageCache({max:200}),this.lazyLoadHandler=(0,n.throttle)(this.lazyLoadHandler.bind(this),this.options.throttleWait),this.setMode(this.options.observer?n.modeType.observer:n.modeType.event)}config(e={}){Object.assign(this.options,e)}performance(){return this.listeners.map(e=>e.performance())}addLazyBox(e){this.listeners.push(e),s.inBrowser&&(this.addListenerTarget(window),this.observer&&this.observer.observe(e.el),e.$el&&e.$el.parentNode&&this.addListenerTarget(e.$el.parentNode))}add(e,t,r){if(this.listeners.some(t=>t.el===e))return this.update(e,t),(0,i.nextTick)(this.lazyLoadHandler);let o=this.valueFormatter(t.value),{src:l}=o;(0,i.nextTick)(()=>{let d;l=(0,n.getBestSelectionFromSrcset)(e,this.options.scale)||l,this.observer&&this.observer.observe(e);let h=Object.keys(t.modifiers)[0];h&&(d=(d=r.context.$refs[h])?d.$el||d:document.getElementById(h)),!d&&(d=(0,s.getScrollParent)(e));let c=new a.default({bindType:t.arg,$parent:d,el:e,src:l,loading:o.loading,error:o.error,cors:o.cors,elRenderer:this.elRenderer.bind(this),options:this.options,imageCache:this.imageCache});this.listeners.push(c),s.inBrowser&&(this.addListenerTarget(window),this.addListenerTarget(d)),this.lazyLoadHandler(),(0,i.nextTick)(()=>this.lazyLoadHandler())})}update(e,t,r){let s=this.valueFormatter(t.value),{src:o}=s;o=(0,n.getBestSelectionFromSrcset)(e,this.options.scale)||o;let a=this.listeners.find(t=>t.el===e);a?a.update({src:o,error:s.error,loading:s.loading}):this.add(e,t,r),this.observer&&(this.observer.unobserve(e),this.observer.observe(e)),this.lazyLoadHandler(),(0,i.nextTick)(()=>this.lazyLoadHandler())}remove(e){if(!e)return;this.observer&&this.observer.unobserve(e);let t=this.listeners.find(t=>t.el===e);t&&(this.removeListenerTarget(t.$parent),this.removeListenerTarget(window),(0,n.remove)(this.listeners,t),t.$destroy())}removeComponent(e){e&&((0,n.remove)(this.listeners,e),this.observer&&this.observer.unobserve(e.el),e.$parent&&e.$el.parentNode&&this.removeListenerTarget(e.$el.parentNode),this.removeListenerTarget(window))}setMode(e){!n.hasIntersectionObserver&&e===n.modeType.observer&&(e=n.modeType.event),this.mode=e,e===n.modeType.event?(this.observer&&(this.listeners.forEach(e=>{this.observer.unobserve(e.el)}),this.observer=null),this.targets.forEach(e=>{this.initListen(e.el,!0)})):(this.targets.forEach(e=>{this.initListen(e.el,!1)}),this.initIntersectionObserver())}addListenerTarget(e){if(!e)return;let t=this.targets.find(t=>t.el===e);return t?t.childrenCount++:(t={el:e,id:++this.targetIndex,childrenCount:1,listened:!0},this.mode===n.modeType.event&&this.initListen(t.el,!0),this.targets.push(t)),this.targetIndex}removeListenerTarget(e){this.targets.forEach((t,r)=>{t.el===e&&(t.childrenCount--,!t.childrenCount&&(this.initListen(t.el,!1),this.targets.splice(r,1),t=null))})}initListen(e,t){this.options.ListenEvents.forEach(r=>(t?(0,n.on):(0,n.off))(e,r,this.lazyLoadHandler))}initEvent(){this.Event={listeners:{loading:[],loaded:[],error:[]}},this.$on=(e,t)=>{!this.Event.listeners[e]&&(this.Event.listeners[e]=[]),this.Event.listeners[e].push(t)},this.$once=(e,t)=>{let r=(...i)=>{this.$off(e,r),t.apply(this,i)};this.$on(e,r)},this.$off=(e,t)=>{if(!t){if(!this.Event.listeners[e])return;this.Event.listeners[e].length=0;return}(0,n.remove)(this.Event.listeners[e],t)},this.$emit=(e,t,r)=>{this.Event.listeners[e]&&this.Event.listeners[e].forEach(e=>e(t,r))}}lazyLoadHandler(){let e=[];this.listeners.forEach(t=>{(!t.el||!t.el.parentNode)&&e.push(t),t.checkInView()&&t.load()}),e.forEach(e=>{(0,n.remove)(this.listeners,e),e.$destroy()})}initIntersectionObserver(){n.hasIntersectionObserver&&(this.observer=new IntersectionObserver(this.observerHandler.bind(this),this.options.observerOptions),this.listeners.length&&this.listeners.forEach(e=>{this.observer.observe(e.el)}))}observerHandler(e){e.forEach(e=>{e.isIntersecting&&this.listeners.forEach(t=>{if(t.el===e.target){if(t.state.loaded)return this.observer.unobserve(t.el);t.load()}})})}elRenderer(e,t,r){let i;if(!e.el)return;let{el:s,bindType:n}=e;switch(t){case"loading":i=e.loading;break;case"error":i=e.error;break;default:({src:i}=e)}if(n?s.style[n]='url("'+i+'")':s.getAttribute("src")!==i&&s.setAttribute("src",i),s.setAttribute("lazy",t),this.$emit(t,e,r),this.options.adapter[t]&&this.options.adapter[t](e,this.options),this.options.dispatchEvent){let r=new CustomEvent(t,{detail:e});s.dispatchEvent(r)}}valueFormatter(e){let t=e,{loading:r,error:i}=this.options;return(0,o.isObject)(e)&&({src:t}=e,r=e.loading||this.options.loading,i=e.error||this.options.error),{src:t,loading:r,error:i}}}}},23351:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return o}});var i=r("25111"),s=r("76586"),n=r("96040");class o{constructor({el:e,src:t,error:r,loading:i,bindType:s,$parent:n,options:o,cors:a,elRenderer:l,imageCache:d}){this.el=e,this.src=t,this.error=r,this.loading=i,this.bindType=s,this.attempt=0,this.cors=a,this.naturalHeight=0,this.naturalWidth=0,this.options=o,this.$parent=n,this.elRenderer=l,this.imageCache=d,this.performanceData={loadStart:0,loadEnd:0},this.filter(),this.initState(),this.render("loading",!1)}initState(){"dataset"in this.el?this.el.dataset.src=this.src:this.el.setAttribute("data-src",this.src),this.state={loading:!1,error:!1,loaded:!1,rendered:!1}}record(e){this.performanceData[e]=Date.now()}update({src:e,loading:t,error:r}){let i=this.src;this.src=e,this.loading=t,this.error=r,this.filter(),i!==this.src&&(this.attempt=0,this.initState())}checkInView(){let e=(0,i.useRect)(this.el);return e.top<window.innerHeight*this.options.preLoad&&e.bottom>this.options.preLoadTop&&e.left<window.innerWidth*this.options.preLoad&&e.right>0}filter(){Object.keys(this.options.filter).forEach(e=>{this.options.filter[e](this,this.options)})}renderLoading(e){this.state.loading=!0,(0,s.loadImageAsync)({src:this.loading,cors:this.cors},()=>{this.render("loading",!1),this.state.loading=!1,e()},()=>{e(),this.state.loading=!1})}load(e=n.noop){if(this.attempt>this.options.attempt-1&&this.state.error){e();return}if(!this.state.rendered||!this.state.loaded){if(this.imageCache.has(this.src))return this.state.loaded=!0,this.render("loaded",!0),this.state.rendered=!0,e();this.renderLoading(()=>{this.attempt++,this.options.adapter.beforeLoad?.(this,this.options),this.record("loadStart"),(0,s.loadImageAsync)({src:this.src,cors:this.cors},t=>{this.naturalHeight=t.naturalHeight,this.naturalWidth=t.naturalWidth,this.state.loaded=!0,this.state.error=!1,this.record("loadEnd"),this.render("loaded",!1),this.state.rendered=!0,this.imageCache.add(this.src),e()},e=>{this.options.silent||console.error(e),this.state.error=!0,this.state.loaded=!1,this.render("error",!1)})})}}render(e,t){this.elRenderer(this,e,t)}performance(){let e="loading",t=0;return this.state.loaded&&(e="loaded",t=(this.performanceData.loadEnd-this.performanceData.loadStart)/1e3),this.state.error&&(e="error"),{src:this.src,state:e,time:t}}$destroy(){this.el=null,this.src=null,this.error=null,this.loading=null,this.bindType=null,this.attempt=0}}},76586:function(e,t,r){"use strict";r.r(t),r.d(t,{hasIntersectionObserver:function(){return s},modeType:function(){return n},remove:function(){return o},getBestSelectionFromSrcset:function(){return a},getDPR:function(){return l},supportWebp:function(){return d},throttle:function(){return h},on:function(){return c},off:function(){return u},loadImageAsync:function(){return p},ImageCache:function(){return f}});var i=r("25111");let s=i.inBrowser&&"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype,n={event:"event",observer:"observer"};function o(e,t){if(!e.length)return;let r=e.indexOf(t);if(r>-1)return e.splice(r,1)}function a(e,t){let r,i,s,n;if("IMG"!==e.tagName||!e.getAttribute("data-srcset"))return;let o=e.getAttribute("data-srcset"),a=e.parentNode.offsetWidth*t,l=(o=o.trim().split(",")).map(e=>(-1===(r=(e=e.trim()).lastIndexOf(" "))?(i=e,s=999998):(i=e.substr(0,r),s=parseInt(e.substr(r+1,e.length-r-2),10)),[s,i]));l.sort((e,t)=>{if(e[0]<t[0])return 1;if(e[0]>t[0])return -1;if(e[0]===t[0]){if(-1!==t[1].indexOf(".webp",t[1].length-5))return 1;if(-1!==e[1].indexOf(".webp",e[1].length-5))return -1}return 0});let d="";for(let e=0;e<l.length;e++){d=(n=l[e])[1];let t=l[e+1];if(t&&t[0]<a){d=n[1];break}if(!t){d=n[1];break}}return d}let l=(e=1)=>i.inBrowser&&window.devicePixelRatio||e;function d(){if(!i.inBrowser)return!1;let e=!0;try{let t=document.createElement("canvas");t.getContext&&t.getContext("2d")&&(e=0===t.toDataURL("image/webp").indexOf("data:image/webp"))}catch(t){e=!1}return e}function h(e,t){let r=null,i=0;return function(...s){if(r)return;let n=Date.now()-i,o=()=>{i=Date.now(),r=!1,e.apply(this,s)};n>=t?o():r=setTimeout(o,t)}}function c(e,t,r){e.addEventListener(t,r,{capture:!1,passive:!0})}function u(e,t,r){e.removeEventListener(t,r,!1)}let p=(e,t,r)=>{let i=new Image;if(!e||!e.src)return r(Error("image src is required"));i.src=e.src,e.cors&&(i.crossOrigin=e.cors),i.onload=()=>t({naturalHeight:i.naturalHeight,naturalWidth:i.naturalWidth,src:i.src}),i.onerror=e=>r(e)};class f{constructor({max:e}){this.options={max:e||100},this.caches=[]}has(e){return this.caches.indexOf(e)>-1}add(e){!this.has(e)&&(this.caches.push(e),this.caches.length>this.options.max&&this.free())}free(){this.caches.shift()}}},81894:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return o}});var i=r("38613"),s=r("25486"),n=r("80418");window.app&&window.app.use(n.default,{lazyComponent:!0});var o=(0,i.defineComponent)({__name:"index",setup(e){var t=(0,s.useTranslate)({"zh-CN":{title2:"\u80CC\u666F\u56FE\u61D2\u52A0\u8F7D",title3:"\u61D2\u52A0\u8F7D\u6A21\u5757"},"en-US":{title2:"Lazyload Background Image",title3:"Lazyload Component"}}),r=[(0,s.cdnURL)("apple-1.jpeg"),(0,s.cdnURL)("apple-2.jpeg"),(0,s.cdnURL)("apple-3.jpeg"),(0,s.cdnURL)("apple-4.jpeg")],n=[(0,s.cdnURL)("apple-5.jpeg"),(0,s.cdnURL)("apple-6.jpeg")],o=[(0,s.cdnURL)("apple-8.jpeg"),(0,s.cdnURL)("apple-7.jpeg")];return(e,s)=>{var a=(0,i.resolveComponent)("demo-block"),l=(0,i.resolveComponent)("lazy-component"),d=(0,i.resolveDirective)("lazy");return(0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,null,[(0,i.createVNode)(a,{title:(0,i.unref)(t)("basicUsage")},{default:(0,i.withCtx)(()=>[((0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(r,e=>(0,i.withDirectives)((0,i.createElementVNode)("img",{key:e}),[[d,e]])),64))]),_:1},8,["title"]),(0,i.createVNode)(a,{title:(0,i.unref)(t)("title2")},{default:(0,i.withCtx)(()=>[((0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(n,e=>(0,i.withDirectives)((0,i.createElementVNode)("div",{key:e}),[[d,e,"background-image"]])),64))]),_:1},8,["title"]),(0,i.createVNode)(a,{title:(0,i.unref)(t)("title3")},{default:(0,i.withCtx)(()=>[(0,i.createVNode)(l,null,{default:(0,i.withCtx)(()=>[((0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(o,e=>(0,i.withDirectives)((0,i.createElementVNode)("img",{key:e}),[[d,e]])),64))]),_:1})]),_:1},8,["title"])],64)}}})},80418:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return i}});var i=r("49874").Lazyload},3814:function(e,t,r){},88957:function(e,t,r){}}]);